<html><head><base href="https://calendrier6261.com"><title>Calendrier Égyptien 6261</title>
<link rel="icon" type="image/png" href="https://image.noelshack.com/fichiers/2024/30/4/1721871966-favicon-africalend.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

  :root {
    --primary-color: #000000;
    --secondary-color: #f50057;
    --background-color: #ebebeb;
    --surface-color: #ffffff;
    --on-surface-color: #212121;
    --on-primary-color: #ffffff;
    --switch-off-color: #ccc;
    --switch-on-color: #2196F3;
  }

  .dark-mode {
    --primary-color: #7986cb;
    --secondary-color: #ff4081;
    --background-color: #121212;
    --surface-color: #1e1e1e;
    --on-surface-color: #ffffff;
    --on-primary-color: #ffffff;
    --switch-off-color: #555;
    --switch-on-color: #bb86fc;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body, html {
    font-family: 'Roboto', sans-serif;
    background-color: var(--background-color);
    color: var(--on-surface-color);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .app-container {
    max-width: 100%;
    margin: 0 auto;
    padding: 10px;
  }

  .card {
    background-color: var(--surface-color);
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
    margin-bottom: 20px;
    padding: 16px;
  }

  .date-block, .events-block {
    display: flex;
    flex-direction: column;
  }

  .date-block {
    align-items: flex-start;
  }

  .date-block img {
    max-width: 150px;
    height: auto;
    margin-bottom: 16px;
    align-self: flex-start;
  }

  .year {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
  }

  .month-name {
    font-size: 1.2rem;
    font-weight: 500;
    margin-bottom: 8px;
  }

  #current-time {
    font-size: 1.2rem;
    color: var(--secondary-color);
  }

  .events-block h2 {
    font-size: 1.2rem;
    font-weight: 500;
    margin-bottom: 12px;
  }

  .event-list {
    list-style-type: none;
  }

  .event-item {
    padding: 8px 0;
    border-bottom: 1px solid #e0e0e0;
  }

  .event-item:last-child {
    border-bottom: none;
  }

  .current-month-block {
   
  }
  .current-month-block.card {
    padding: 10px;

  }

  .days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
  }

  .day-header, .day {
    text-align: center;
    padding: 4px;
    font-size: 0.8rem;
  }

  .day-header {
    font-weight: 500;
    background-color: var(--primary-color);
    color: var(--on-primary-color);
    border-radius: 4px;
  }

  .day {
    background-color: var(--surface-color);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 60px;
  }

  .day:hover {
    background-color: #e0e0e0;
  }

  .day .egyptian-date {
    font-weight: 500;
  }

  .day .gregorian-date {
    font-size: 0.7rem;
    color: #757575;
  }

  .day .event-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: var(--secondary-color);
    border-radius: 0 0 4px 4px;
  }

  .toggle-button {
    background-color: var(--primary-color);
    color: var(--on-primary-color);
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: background-color 0.3s ease;
    display: block;
    margin: 20px auto;
    width: 100%;
  }

  .toggle-button:hover {
    background-color: #303f9f;
  }

  .modal {
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .modal-content {
    background-color: var(--surface-color);
    padding: 20px;
    border-radius: 4px;
    width: 90%;
    max-width: 500px;
  }

  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
  }

  #eventForm {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  #eventForm input, #eventForm textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
  }

  #eventForm button {
    background-color: var(--primary-color);
    color: var(--on-primary-color);
    border: none;
    padding: 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  #eventForm button:hover {
    background-color: #303f9f;
  }

  #deleteEvent {
    background-color: var(--secondary-color);
    color: var(--on-primary-color);
    border: none;
    padding: 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 16px;
  }

  #deleteEvent:hover {
    background-color: #c51162;
  }

  .copyright {
    text-align: center;
    font-size: 0.8rem;
    color: #757575;
    margin-top: 20px;
  }

  .integration-button {
    background-color: var(--secondary-color);
    color: var(--on-primary-color);
    border: none;
    padding: 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 16px;
    width: 100%;
  }

  .integration-button:hover {
    background-color: #c51162;
  }

  .options-container {
    margin-top: 16px;
  }

  .option-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
  }

  /* Switch styles */
  .switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
  }

  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--switch-off-color);
    transition: .4s;
    border-radius: 34px;
  }

  .slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }

  input:checked + .slider {
    background-color: var(--switch-on-color);
  }

  input:checked + .slider:before {
    transform: translateX(26px);
  }

  @media (min-width: 768px) {
    .app-container {
      max-width: 1200px;
      padding: 20px;
    }

    .top-blocks {
      display: flex;
      gap: 20px;
    }

    .date-block, .events-block {
      flex: 1;
    }

    .date-block img {
      max-width: 200px;
    }

    .year {
      font-size: 3rem;
    }

    .month-name {
      font-size: 1.5rem;
    }

    #current-time {
      font-size: 1.5rem;
    }

    .days {
      gap: 8px;
    }

    .day-header, .day {
      padding: 8px;
      font-size: 1rem;
    }

    .day {
      height: 80px;
    }

    .day .gregorian-date {
      font-size: 0.8rem;
    }

    .toggle-button {
      padding: 12px 24px;
      font-size: 1rem;
      width: auto;
    }
  }
</style>
</head>
<body>
  <div class="app-container">
    <div class="top-blocks">
      <div class="date-block card">
        <img src="https://image.noelshack.com/fichiers/2024/30/4/1721923362-africalend.png" alt="Africalend logo" width="200">
        <p class="year" id="current-year">6261</p>
        <p class="month-name" id="current-month-name">4 Thot, Akhet</p>
        <p id="current-time"></p>
      </div>
      <div class="events-block card">
        <h2>Les paramètres</h2>
        <div class="options-container">
          <div class="option-item">
            <span>Afficher les dates grégoriennes</span>
            <label class="switch">
              <input type="checkbox" id="show-gregorian" checked>
              <span class="slider"></span>
            </label>
          </div>
          <div class="option-item">
            <span>Mode sombre</span>
            <label class="switch">
              <input type="checkbox" id="dark-mode">
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <button class="integration-button" id="integration-button">Intégrer dans votre site</button>
      </div>
    </div>
    <div class="current-month-block card">
      <!-- Le mois en cours sera généré dynamiquement ici -->
    </div>
    <button class="toggle-button" id="toggle-calendar">
      Voir les autres mois
    </button>
    <div class="main-calendar" id="main-calendar" style="display: none;">
      <div class="years-calendar" id="years-calendar">
        <!-- Les mois restants seront générés dynamiquement ici -->
      </div>
    </div>
    <p class="copyright">© 6261 Africalend</p>
  </div>

  <div id="eventModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="modalTitle">Ajouter un événement</h2>
      <form id="eventForm">
        <input type="hidden" id="eventDate" name="eventDate">
        <input type="text" id="eventTitle" name="eventTitle" placeholder="Titre de l'événement" required>
        <textarea id="eventDescription" name="eventDescription" placeholder="Description de l'événement" rows="3"></textarea>
        <button type="submit">Enregistrer</button>
      </form>
      <button id="deleteEvent" style="display:none;">Supprimer l'événement</button>
    </div>
  </div>

<script>
const monthNames = [
  { name: "Djehouty", start: new Date(2023, 6, 19), end: new Date(2023, 7, 17), firstDayIndex: 4 },
  { name: "Phaophi", start: new Date(2023, 7, 18), end: new Date(2023, 8, 16), firstDayIndex: 6 },
  { name: "Hout Horo", start: new Date(2023, 8, 17), end: new Date(2023, 9, 16), firstDayIndex: 1 },
  { name: "Khoiak", start: new Date(2023, 9, 17), end: new Date(2023, 10, 15), firstDayIndex: 3 },
  { name: "Tybi", start: new Date(2023, 10, 16), end: new Date(2023, 11, 15), firstDayIndex: 5 },
  { name: "Mekhir", start: new Date(2023, 11, 16), end: new Date(2024, 0, 14), firstDayIndex: 0 },
  { name: "Phamenoth", start: new Date(2024, 0, 15), end: new Date(2024, 1, 13), firstDayIndex: 2 },
  { name: "Rennoutet", start: new Date(2024, 1, 14), end: new Date(2024, 2, 15), firstDayIndex: 4 },
  { name: "Pakhon", start: new Date(2024, 2, 16), end: new Date(2024, 3, 14), firstDayIndex: 6 },
  { name: "Payni", start: new Date(2024, 3, 15), end: new Date(2024, 4, 14), firstDayIndex: 1 },
  { name: "Epiphi", start: new Date(2024, 4, 15), end: new Date(2024, 5, 13), firstDayIndex: 3 },
  { name: "Mésori", start: new Date(2024, 5, 14), end: new Date(2024, 6, 13), firstDayIndex: 5 }
];

const dayNames = ["Thot", "Horus", "Isis", "Osiris", "Hathor", "Kheper", "Ra"];

let events = JSON.parse(localStorage.getItem('events')) || {};

const holidays = {
  '2024-12-26': 'Fête de Kwanzaa'
};

function getGregorianDate(egyptianYear, egyptianMonth, egyptianDay) {
  const baseDate = monthNames[egyptianMonth].start;
  const gregorianDate = new Date(baseDate);
  gregorianDate.setDate(baseDate.getDate() + egyptianDay - 1);
  return gregorianDate;
}

function getEgyptianDate(gregorianDate) {
  for (let i = 0; i < monthNames.length; i++) {
    if (gregorianDate >= monthNames[i].start && gregorianDate <= monthNames[i].end) {
      const dayDiff = Math.floor((gregorianDate - monthNames[i].start) / (1000 * 60 * 60 * 24));
      return {
        month: i,
        day: dayDiff + 1,
        dayName: dayNames[(dayDiff + monthNames[i].firstDayIndex) % 7]
      };
    }
  }
  // Si on arrive ici, c'est probablement un jour épagomène
  const lastMonth = monthNames[monthNames.length - 1];
  const dayDiff = Math.floor((gregorianDate - lastMonth.end) / (1000 * 60 * 60 * 24));
  return {
    month: 12, // Représente les jours épagomènes
    day: dayDiff + 1,
    dayName: dayNames[(dayDiff + (lastMonth.firstDayIndex + 30) % 7) % 7]
  };
}

function renderMonth(monthIndex, containerClass, withHeaders = true) {
  const month = monthNames[monthIndex];
  const monthBlock = document.createElement("div");
  monthBlock.className = containerClass ? containerClass : "month-block card";
  const monthHeader = `
    <div class="month-header">
      <h3 class="month-name">${month.name}</h3>
    </div>
  `;
  monthBlock.innerHTML = monthHeader;

  const daysContainer = document.createElement("div");
  daysContainer.className = "days";

  if (withHeaders) {
    dayNames.forEach(day => {
      const dayHeader = document.createElement("div");
      dayHeader.className = "day-header";
      dayHeader.textContent = day[0];
      daysContainer.appendChild(dayHeader);
    });
  }

  const firstDayIndex = month.firstDayIndex;
  for (let i = 0; i < firstDayIndex; i++) {
    const emptyDay = document.createElement("div");
    emptyDay.className = "day";
    daysContainer.appendChild(emptyDay);
  }

  for (let i = 1; i <= 30; i++) {
    const dayElement = document.createElement("div");
    dayElement.className = "day";
    const gregorianDate = getGregorianDate(6261, monthIndex, i);
    const egyptianDayName = dayNames[(i - 1 + firstDayIndex) % 7];
    const dateKey = `6261-${monthIndex}-${i}`;
    const gregorianDateString = `${gregorianDate.getFullYear()}-${(gregorianDate.getMonth() + 1).toString().padStart(2, '0')}-${gregorianDate.getDate().toString().padStart(2, '0')}`;
    
    dayElement.innerHTML = `
      <span class="egyptian-date">${i}</span>
      <span class="egyptian-day-name">${egyptianDayName}</span>
      <span class="gregorian-date">${gregorianDate.getDate()} ${gregorianDate.toLocaleString("default", { month: "short" })}</span>
      ${events[dateKey] ? '<div class="event-bar"></div>' : ''}
      ${holidays[gregorianDateString] ? '<div class="holiday-indicator">🎉</div>' : ''}
    `;
    
    dayElement.addEventListener('click', () => openModal(dateKey, gregorianDateString));
    
    daysContainer.appendChild(dayElement);
  }

  monthBlock.appendChild(daysContainer);
  return monthBlock;
}

function renderEpagomenalDays() {
  const epagomenalBlock = document.createElement("div");
  epagomenalBlock.className = "month-block card";
  const monthHeader = `
    <div class="month-header">
      <h3 class="month-name">Jours Épagomènes</h3>
    </div>
  `;
  epagomenalBlock.innerHTML = monthHeader;

  const daysContainer = document.createElement("div");
  daysContainer.className = "days";

  const baseDate = new Date(2024 - 4737, 6, 14);
  const firstDayIndex = 0;

  for (let i = 0; i < firstDayIndex; i++) {
    const emptyDay = document.createElement("div");
    emptyDay.className = "day";
    daysContainer.appendChild(emptyDay);
  }

  for (let i = 1; i <= 5; i++) {
    const dayElement = document.createElement("div");
    dayElement.className = "day";
    const gregorianDate = new Date(baseDate);
    gregorianDate.setDate(baseDate.getDate() + i - 1);
    const egyptianDayName = dayNames[(i - 1 + firstDayIndex) % 7];
    const dateKey = `6261-epagomenal-${i}`;
    const gregorianDateString = `${gregorianDate.getFullYear()}-${(gregorianDate.getMonth() + 1).toString().padStart(2, '0')}-${gregorianDate.getDate().toString().padStart(2, '0')}`;
    
    dayElement.innerHTML = `
      <span class="egyptian-date">${i}</span>
      <span class="egyptian-day-name">${egyptianDayName}</span>
      <span class="gregorian-date">${gregorianDate.getDate()} ${gregorianDate.toLocaleString("default", { month: "short" })}</span>
      ${events[dateKey] ? '<div class="event-bar"></div>' : ''}
      ${holidays[gregorianDateString] ? '<div class="holiday-indicator">🎉</div>' : ''}
    `;
    
    dayElement.addEventListener('click', () => openModal(dateKey, gregorianDateString));
    
    daysContainer.appendChild(dayElement);
  }

  epagomenalBlock.appendChild(daysContainer);
  return epagomenalBlock;
}

function displayCurrentMonth() {
  const calendarContainer = document.querySelector(".current-month-block");
  calendarContainer.innerHTML = ''; // Clear previous content
  const currentMonthBlock = renderMonth(0, "current-month-block", true);
  calendarContainer.appendChild(currentMonthBlock);
}

function displayAllMonths() {
  const calendarContainer = document.querySelector(".years-calendar");
  calendarContainer.innerHTML = ''; // Clear previous content
  for (let i = 1; i < 12; i++) {
    const monthBlock = renderMonth(i);
    calendarContainer.appendChild(monthBlock);
  }
  const epagomenalBlock = renderEpagomenalDays();
  calendarContainer.appendChild(epagomenalBlock);
}

function initCalendar() {
  displayCurrentMonth();
}

const toggleButton = document.getElementById("toggle-calendar");
const mainCalendar = document.getElementById("main-calendar");

toggleButton.addEventListener("click", () => {
  if (mainCalendar.style.display === "none") {
    mainCalendar.style.display = "block";
    toggleButton.textContent = "Cacher les autres mois";
    displayAllMonths();
  } else {
    mainCalendar.style.display = "none";
    toggleButton.textContent = "Voir les autres mois";
  }
});

// Modal management
const modal = document.getElementById("eventModal");
const span = document.getElementsByClassName("close")[0];
const eventForm = document.getElementById("eventForm");
const deleteEventButton = document.getElementById("deleteEvent");
let currentDate = '';
let currentGregorianDate = '';

function openModal(date, gregorianDate) {
  currentDate = date;
  currentGregorianDate = gregorianDate;
  modal.style.display = "block";
  document.getElementById("eventDate").value = date;
  
  if (events[date]) {
    document.getElementById("modalTitle").textContent = "Modifier l'événement";
    document.getElementById("eventTitle").value = events[date].title;
    document.getElementById("eventDescription").value = events[date].description;
    deleteEventButton.style.display = "block";
  } else if (holidays[gregorianDate]) {
    document.getElementById("modalTitle").textContent = "Jour férié";
    document.getElementById("eventTitle").value = holidays[gregorianDate];
    document.getElementById("eventDescription").value = "";
    document.getElementById("eventTitle").readOnly = true;
    document.getElementById("eventDescription").readOnly = true;
    deleteEventButton.style.display = "none";
  } else {
    document.getElementById("modalTitle").textContent = "Ajouter un événement";
    document.getElementById("eventTitle").value = "";
    document.getElementById("eventDescription").value = "";
    document.getElementById("eventTitle").readOnly = false;
    document.getElementById("eventDescription").readOnly = false;
    deleteEventButton.style.display = "none";
  }
}

span.onclick = function() {
  modal.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

eventForm.onsubmit = function(e) {
  e.preventDefault();
  if (!holidays[currentGregorianDate]) {
    const title = document.getElementById("eventTitle").value;
    const description = document.getElementById("eventDescription").value;
    
    events[currentDate] = { title, description };
    localStorage.setItem('events', JSON.stringify(events));
    
    modal.style.display = "none";
    initCalendar();
    if (mainCalendar.style.display === "block") {
      displayAllMonths();
    }
  }
}

deleteEventButton.onclick = function() {
  delete events[currentDate];
  localStorage.setItem('events', JSON.stringify(events));
  
  modal.style.display = "none";
  initCalendar();
  if (mainCalendar.style.display === "block") {
    displayAllMonths();
  }
}

function updateTime() {
  const now = new Date();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const seconds = now.getSeconds().toString().padStart(2, '0');
  document.getElementById('current-time').textContent = `${hours}:${minutes}:${seconds}`;
}

setInterval(updateTime, 1000);
updateTime(); // Initial call to display time immediately

// Integration button functionality
document.getElementById('integration-button').addEventListener('click', function() {
  const integrationCode = `<iframe src="https://calendrier6261.com" width="100%" height="600" frameborder="0"></iframe>`;
  alert("Voici le code pour intégrer le calendrier dans votre site :\n\n" + integrationCode);
});

// Gestion des options
const showGregorianSwitch = document.getElementById('show-gregorian');
const darkModeSwitch = document.getElementById('dark-mode');

showGregorianSwitch.addEventListener('change', function() {
  const gregorianDates = document.querySelectorAll('.gregorian-date');
  gregorianDates.forEach(date => {
    date.style.display = this.checked ? 'block' : 'none';
  });
});

darkModeSwitch.addEventListener('change', function() {
  document.body.classList.toggle('dark-mode', this.checked);
});

initCalendar();
</script>
</body></html>
